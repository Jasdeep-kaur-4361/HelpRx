<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>med-manager</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
    <script src="script/angular.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
    <link rel="stylesheet" href="style/med-manager.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <script>
        var module = angular.module("myModule", []);
        module.controller("myController", function ($scope, $http) 
        {
            $scope.jsonBArray;
            $scope.emailName;
            $scope.fetchRecords=function()
                    {
                        // alert("ngbfvsdcaasvfbd");
                        var url="/get-angular-show-data-records?emailKuch="+$scope.emailName;
                        $http.get(url).then(doneKuch,failKuch);
                        function doneKuch(response)
                        {
                            // alert(JSON.stringify(response.data)); 
                            $scope.jsonBArray=response.data;
                        }
                        function failKuch(response)
                        {
                            alert(JSON.stringify(response.data));
                        }
                    }
                    $scope.autoDel=function()
                    {
                    // alert("helooooo");
                    var url="/get-angular-after-delete-records";
                        $http.get(url).then(doneKuch,failKuch);
                        function doneKuch(response)
                        {
                            // alert(JSON.stringify(response.data)); 
                            $scope.jsonBArray=response.data;
                        }
                        function failKuch(response)
                        {
                            alert(JSON.stringify(response.data));
                        }
                    }  
                

        })
    </script>

</head>

<body ng-app="myModule" ng-controller="myController" ng-init="">
    <!-- ---------------------------NAVBAR---------------------- -->
    <form method="get">
      <nav class="navbar navbar-expand-lg ">
          <div class="container-fluid ">
              <img class="selfhelp" src="photos/helping-3.jpg" alt="">
              <p class="helprx">helpRX</p>
              <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                  data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                  aria-expanded="false" aria-label="Toggle navigation">
                  <span class="navbar-toggler-icon"></span>
              </button>
              
              <button type="button" id="signupbtn" class="btn btn-primary offset-md-9" data-bs-toggle="modal"
                  data-bs-target="#exampleModal">

                  <!-- open vala ^ -->
                  Signup </button>
              
                  <button type="button" id="loginbtn" class="btn btn-primary" data-bs-toggle="modal"
                  style="margin-left: 10px;" data-bs-target="#exampleModal2">
                  Login </button>


              <!-- <button type="button" onclick="dashboard();" style="margin-left: 10px;" id="dashbtn" formaction="/dash-admin" class="btn btn-primary">
                          Dashboard </button> -->

          </div>
          </div>
      </nav>
  </form>
    <center>
        <!-- <p>
            <h3>
              Welcome : <span id="spanwelcome">*</span>
            </h3>
          </p> -->
        
        <div class="conatiner">
            <div class="row mt-5">
                <div class="col-md-3 offset-md-3">
                    <label for="Email" class="form-label">Email</label>
                    <!-- <span id="errEmail">*</span> -->
                    <input type="email" ng-model="emailName" class="form-control" required autofocus id="txtEmail"
                        placeholder="Enter your Email">
                </div>

                <div class="col-md-4 mt-4" style="padding-top: 11px;">
                    <input type="button" class="btn btn-primary" id="get-rec" value="Get Records" ng-click="fetchRecords();" >                
                </div>
            </div>
            <div class="row mt-5">
                <div class="col-md-12">
                    
                    <table class="table" width="1000" border="1px">
                        <br><br><br><br><br>
                        <tbody class="table-group-divider">
                        <tr>
                            <th>Sr No.</th>  <th>Medicine Name</th>  <th>Expiry Date</th>  <th>Quantity</th>  <th>Operations</th>
                        </tr></thead>
                        <tr ng-repeat="myobj in jsonBArray">
                            <td>{{$index+1}}</td>
                            <td>{{myobj.medname}}</td>
                            <td>{{myobj.expiry}}</td>
                            <td>{{myobj.qty}}</td>
                            <td>
                                <input type="button" id="ptanibtn" class="btn btn-primary" ng-click="autoDel();" value="Do Unavail">                                
                            </td>
                        </tr>
                        </tbody>

                    </table>
                </div>
            </div>
    </center>

</body>

</html>